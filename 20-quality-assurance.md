# Обеспечение качества продукта

Продукт считается работающим в том случае, если:

* Все тесты успешно завершаются
* Покрытие тестами составляет не менее 70% кода проекта
* Количество ошибок форматирования не превышает 50
* Количество предупреждений статического анализатора не превышает 50
* После установки всех зависимостей проект разворачивается одной
консольной командой, которая предварительно проверяет конфигурацию и
останавливает выполнение в случае отсутствия необходимых параметров или
ошибок подключения к внешним сервисам
* На развернутом проекте smoke-тесты прогоняются без ошибок

Конкретные стандарты форматирования, используемые правила статического
анализатора и сам анализатор могут выбираться под конкретный проект,
однако рекомендуется использование [PHP Code Sniffer][phpcs] с
включенными стандартами PSR-1 и PSR-2 для анализа форматирования и
[PHP Mess Detector][phpmd] со всеми включенными правилами (за
исключением правила `ElseExpression` и с минимальной длиной переменной в
два символа) для анализа качества кода. Допускается, но не
приветствуется использовать аннотации для подавления вывода ошибок
форматирования. Количество допустимых ошибок также может варьироваться,
но рекомендуется только уменьшать их допустимое количество, и, в идеале,
не допускать их вообще. Гарантированно рабочий код (например, геттеры и
сеттеры без логики) рекомендуется помечать аннотацией
`@codeCoverageIgnore` для исключения их из отчетов по покрытию кода.

Также рекомендуется использовать SonarQube для нахождения плохо
отформатированного или некачественного кода.

  [phpmd]: http://phpmd.org/
  [phpcs]: http://www.squizlabs.com/php-codesniffer
